<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Workshop RSVP: AI in Research Practice</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800&display=swap');
        body { font-family: 'Inter', sans-serif; -webkit-font-smoothing: antialiased; }
        .fade-in { animation: fadeIn 0.5s ease-out forwards; }
        @keyframes fadeIn { from { opacity: 0; transform: translateY(10px); } to { opacity: 1; transform: translateY(0); } }
    </style>
</head>
<body class="bg-slate-50 text-slate-900 selection:bg-indigo-100">

    <div id="app" class="min-h-screen">
        <div id="view-container"></div>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-app.js";
        import { getFirestore, collection, addDoc, onSnapshot, doc, deleteDoc, serverTimestamp } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-firestore.js";
        import { getAuth, signInAnonymously, signInWithCustomToken, onAuthStateChanged } from "https://www.gstatic.com/firebasejs/11.6.1/firebase-auth.js";

        const firebaseConfig = JSON.parse(__firebase_config);
        const app = initializeApp(firebaseConfig);
        const auth = getAuth(app);
        const db = getFirestore(app);
        const appId = typeof __app_id !== 'undefined' ? __app_id : 'workshop-rsvp-2026';

        let state = {
            view: 'landing',
            user: null,
            registrations: [],
            loading: false,
            isAdminAuthenticated: false
        };

        async function initAuth() {
            if (typeof __initial_auth_token !== 'undefined' && __initial_auth_token) {
                await signInWithCustomToken(auth, __initial_auth_token);
            } else {
                await signInAnonymously(auth);
            }
            onAuthStateChanged(auth, (u) => {
                state.user = u;
                render();
            });
        }

        window.setView = (v) => {
            state.view = v;
            render();
            window.scrollTo(0,0);
        };

        window.handleRSVP = async (event) => {
            event.preventDefault();
            if (!state.user) return;
            
            const formData = new FormData(event.target);
            const data = {
                name: formData.get('name'),
                email: formData.get('email'),
                affiliation: formData.get('affiliation'),
                researchField: formData.get('researchField'),
                wantsCaseStudy: formData.get('wantsCaseStudy') === 'on',
                timestamp: serverTimestamp(),
                userId: state.user.uid
            };

            state.loading = true;
            render();

            try {
                const registrationsCol = collection(db, 'artifacts', appId, 'public', 'data', 'registrations');
                await addDoc(registrationsCol, data);
                state.view = 'success';
            } catch (e) {
                console.error(e);
                alert("Error saving registration.");
            } finally {
                state.loading = false;
                render();
                window.scrollTo(0,0);
            }
        };

        window.tryAdminLogin = (event) => {
            if (event) event.preventDefault();
            const pw = document.getElementById('admin-pw').value;
            if (pw === '2026') {
                state.isAdminAuthenticated = true;
                state.view = 'admin-dashboard';
                setupAdminListener();
            } else {
                alert("Incorrect access code.");
            }
            render();
        };

        function setupAdminListener() {
            if (!state.user || !state.isAdminAuthenticated) return;
            const registrationsCol = collection(db, 'artifacts', appId, 'public', 'data', 'registrations');
            onSnapshot(registrationsCol, (snapshot) => {
                state.registrations = snapshot.docs
                    .map(d => ({ id: d.id, ...d.data() }))
                    .sort((a, b) => (b.timestamp?.seconds || 0) - (a.timestamp?.seconds || 0));
                render();
            });
        }

        window.deleteEntry = async (id) => {
            if (!confirm("Remove this registration?")) return;
            await deleteDoc(doc(db, 'artifacts', appId, 'public', 'data', 'registrations', id));
        };

        function render() {
            const container = document.getElementById('view-container');
            const logoErrorHandler = "this.style.display='none'";
            
            if (state.view === 'success') {
                container.innerHTML = `
                    <div class="min-h-screen bg-slate-50 flex items-center justify-center p-4 fade-in">
                        <div class="max-w-md w-full bg-white rounded-3xl shadow-xl p-10 text-center">
                            <div class="w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6 text-green-600">
                                <i data-lucide="check-circle" size="40"></i>
                            </div>
                            <h1 class="text-3xl font-bold text-slate-900 mb-4">Registration Received!</h1>
                            <p class="text-slate-600 mb-8 leading-relaxed">Thank you for registering for the joint workshop. We have saved your information for the organizing committee.</p>
                            <button onclick="setView('landing')" class="w-full bg-indigo-600 text-white font-bold py-4 rounded-xl hover:bg-indigo-700 shadow-lg shadow-indigo-100 transition-all">Back to Event Info</button>
                        </div>
                    </div>
                `;
            } else if (state.view === 'admin-login') {
                container.innerHTML = `
                    <div class="min-h-screen bg-slate-900 flex items-center justify-center p-4 fade-in">
                        <div class="bg-white p-8 rounded-3xl shadow-2xl max-w-sm w-full">
                            <div class="text-indigo-600 mb-4 flex justify-center"><i data-lucide="lock" size="40"></i></div>
                            <h2 class="text-2xl font-bold text-center mb-6">Organizer Login</h2>
                            <form onsubmit="tryAdminLogin(event)">
                                <input id="admin-pw" type="password" placeholder="Enter access code" class="w-full px-4 py-3 bg-slate-100 border border-slate-200 rounded-xl mb-4 outline-none focus:ring-2 focus:ring-indigo-500">
                                <button type="submit" class="w-full bg-indigo-600 text-white font-bold py-3 rounded-xl hover:bg-indigo-700 shadow-lg shadow-indigo-100">Access Dashboard</button>
                            </form>
                            <button onclick="setView('landing')" class="w-full text-slate-500 mt-4 text-sm font-medium hover:text-slate-800">Cancel</button>
                        </div>
                    </div>
                `;
            } else if (state.view === 'admin-dashboard') {
                container.innerHTML = `
                    <div class="min-h-screen p-6 md:p-12 fade-in">
                        <div class="max-w-6xl mx-auto">
                            <div class="flex flex-col md:flex-row md:items-end justify-between mb-8 gap-4">
                                <div>
                                    <button onclick="setView('landing')" class="text-indigo-600 font-semibold flex items-center gap-1 mb-2 hover:underline">← Back to Landing Page</button>
                                    <h1 class="text-3xl font-bold text-slate-900 tracking-tight">Organizer Dashboard</h1>
                                    <p class="text-slate-500">Real-time participant tracking</p>
                                </div>
                                <div class="bg-indigo-600 text-white px-6 py-2 rounded-xl font-bold shadow-lg shadow-indigo-100 inline-block w-fit">
                                    ${state.registrations.length} Registered
                                </div>
                            </div>
                            <div class="bg-white rounded-3xl border border-slate-200 shadow-xl overflow-hidden">
                                <div class="overflow-x-auto">
                                    <table class="w-full text-left border-collapse">
                                        <thead class="bg-slate-50 border-b border-slate-200">
                                            <tr>
                                                <th class="px-6 py-4 text-sm font-bold text-slate-700">Name</th>
                                                <th class="px-6 py-4 text-sm font-bold text-slate-700">Email</th>
                                                <th class="px-6 py-4 text-sm font-bold text-slate-700">Affiliation</th>
                                                <th class="px-6 py-4 text-sm font-bold text-slate-700 text-center">Case Study?</th>
                                                <th class="px-6 py-4 text-sm font-bold text-slate-700">Actions</th>
                                            </tr>
                                        </thead>
                                        <tbody class="divide-y divide-slate-100">
                                            ${state.registrations.map(reg => `
                                                <tr class="hover:bg-slate-50 transition-colors">
                                                    <td class="px-6 py-4 font-medium text-slate-900">${reg.name}</td>
                                                    <td class="px-6 py-4 text-slate-600 text-sm">${reg.email}</td>
                                                    <td class="px-6 py-4 text-slate-600 text-sm">${reg.affiliation}</td>
                                                    <td class="px-6 py-4 text-center">
                                                        ${reg.wantsCaseStudy ? '<span class="bg-green-100 text-green-700 px-2 py-1 rounded-full text-[10px] font-bold">YES</span>' : '<span class="text-slate-300">—</span>'}
                                                    </td>
                                                    <td class="px-6 py-4">
                                                        <button onclick="deleteEntry('${reg.id}')" class="text-slate-300 hover:text-red-600 transition-colors">
                                                            <i data-lucide="trash-2" size="18"></i>
                                                        </button>
                                                    </td>
                                                </tr>
                                            `).join('')}
                                            ${state.registrations.length === 0 ? '<tr><td colspan="5" class="px-6 py-20 text-center text-slate-400 italic">No registrations found yet.</td></tr>' : ''}
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                `;
            } else {
                container.innerHTML = `
                    <header class="relative bg-white border-b border-slate-200 pt-12 pb-28 overflow-hidden">
                        <div class="absolute top-0 right-0 w-1/3 h-full opacity-5 pointer-events-none">
                            <svg width="100%" height="100%" viewBox="0 0 100 100" preserveAspectRatio="none">
                                <path d="M0 0 L100 0 L100 100 Z" fill="currentColor" class="text-indigo-600" />
                            </svg>
                        </div>
                        <div class="max-w-5xl mx-auto px-6 relative z-10">
                            <div class="flex flex-wrap items-center gap-8 mb-12 opacity-90">
                                <img src="https://www.uni-konstanz.de/typo3conf/ext/in2template/Resources/Public/Images/logo.svg" class="h-10 w-auto" alt="Konstanz" onerror="${logoErrorHandler}">
                                <div class="h-8 w-px bg-slate-200 hidden md:block"></div>
                                <img src="https://buberfellows.huji.ac.il/sites/default/files/buberfellows/files/mbs_logo_new_0.png" class="h-12 w-auto object-contain" alt="Buber" onerror="${logoErrorHandler}">
                                <img src="https://buberfellows.huji.ac.il/profiles/openscholar/themes/huji_researcher/images/HUJI_LogoEng.jpg" class="h-10 w-auto object-contain" alt="HUJI" onerror="${logoErrorHandler}">
                            </div>
                            <div class="inline-flex items-center gap-2 px-3 py-1.5 rounded-full bg-indigo-50 text-indigo-700 text-sm font-semibold mb-8 border border-indigo-100 shadow-sm">
                                <i data-lucide="users" size="16"></i> Joint Interdisciplinary Workshop
                            </div>
                            <h1 class="text-4xl md:text-6xl font-extrabold text-slate-900 mb-6 leading-[1.1] max-w-4xl tracking-tight">From Tool to Teammate: How Does AI Fundamentally Transform Research Practice?</h1>
                            <p class="text-xl md:text-2xl text-slate-600 mb-10 max-w-3xl leading-relaxed font-light">
                                Hosted by <span class="font-semibold text-slate-800">Zukunftskolleg Konstanz</span> & <span class="font-semibold text-slate-800">The Martin Buber Society of Fellows</span>.
                            </p>
                            <div class="flex flex-wrap gap-4 text-slate-700 font-medium">
                                <div class="flex items-center gap-2.5 bg-white px-5 py-3 rounded-xl shadow-sm border border-slate-200">
                                    <i data-lucide="calendar" class="text-indigo-600" size="20"></i> June 2026
                                </div>
                                <div class="flex items-center gap-2.5 bg-white px-5 py-3 rounded-xl shadow-sm border border-slate-200">
                                    <i data-lucide="map-pin" class="text-indigo-600" size="20"></i> Konstanz & St. Gallen
                                </div>
                            </div>
                        </div>
                    </header>

                    <main class="max-w-5xl mx-auto px-6 -mt-10 pb-24 relative z-20">
                        <div class="grid grid-cols-1 lg:grid-cols-3 gap-10">
                            <div class="lg:col-span-2 space-y-16">
                                <section class="bg-white rounded-3xl shadow-sm border border-slate-200 p-8 md:p-10">
                                    <p class="text-xl text-slate-800 leading-relaxed mb-8 font-medium">Artificial Intelligence is no longer a distant theoretical prospect; it is actively reshaping the mechanics of how we think, write, and discover.</p>
                                    <div class="space-y-6 text-slate-600 leading-relaxed text-lg">
                                        <p>Beyond the hype, how do these tools redefine the day-to-day labor of a historian deciphering a century of archives, a sociologist mapping social networks, or a scientist postulating a new hypothesis?</p>
                                        <p>We invite postdoctoral fellows to join a collaborative exploration of the methodological frontier. This workshop moves past the "what if" to focus on the "how to," examining the concrete impact of AI across the Humanities, Social Sciences, and STEM.</p>
                                    </div>
                                </section>

                                <section>
                                    <div class="flex items-center gap-3 mb-6 border-b border-slate-200 pb-2">
                                        <i data-lucide="cpu" class="text-indigo-600" size="24"></i>
                                        <h2 class="text-2xl font-bold text-slate-800 tracking-tight">Our Framework: The Four Faces of AI</h2>
                                    </div>
                                    <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
                                        <div class="bg-white p-6 rounded-xl border border-slate-100 shadow-sm">
                                            <div class="w-12 h-12 bg-indigo-50 rounded-lg flex items-center justify-center mb-4 text-indigo-600"><i data-lucide="archive"></i></div>
                                            <h3 class="font-bold text-lg mb-2">The Instrument</h3>
                                            <p class="text-slate-600 text-sm leading-relaxed">Achieving new scales of precision and efficiency through automated workflows and data processing.</p>
                                        </div>
                                        <div class="bg-white p-6 rounded-xl border border-slate-100 shadow-sm">
                                            <div class="w-12 h-12 bg-indigo-50 rounded-lg flex items-center justify-center mb-4 text-indigo-600"><i data-lucide="users"></i></div>
                                            <h3 class="font-bold text-lg mb-2">The Assistant</h3>
                                            <p class="text-slate-600 text-sm leading-relaxed">Expanding our cognitive reach through augmentation, summarization, and smart retrieval.</p>
                                        </div>
                                        <div class="bg-white p-6 rounded-xl border border-slate-100 shadow-sm">
                                            <div class="w-12 h-12 bg-indigo-50 rounded-lg flex items-center justify-center mb-4 text-indigo-600"><i data-lucide="book-open"></i></div>
                                            <h3 class="font-bold text-lg mb-2">The Co-Author</h3>
                                            <p class="text-slate-600 text-sm leading-relaxed">Navigating the ethics and craft of generative text, synthesis, and creative collaboration.</p>
                                        </div>
                                        <div class="bg-white p-6 rounded-xl border border-slate-100 shadow-sm">
                                            <div class="w-12 h-12 bg-indigo-50 rounded-lg flex items-center justify-center mb-4 text-indigo-600"><i data-lucide="lightbulb"></i></div>
                                            <h3 class="font-bold text-lg mb-2">The Epistemic Agent</h3>
                                            <p class="text-slate-600 text-sm leading-relaxed">AI as a partner in data-driven hypothesis formation, pattern recognition, and discovery.</p>
                                        </div>
                                    </div>
                                </section>

                                <section>
                                    <div class="flex items-center gap-3 mb-6 border-b border-slate-200 pb-2">
                                        <i data-lucide="clock" class="text-indigo-600" size="24"></i>
                                        <h2 class="text-2xl font-bold text-slate-800 tracking-tight">What to Expect</h2>
                                    </div>
                                    <div class="grid grid-cols-1 sm:grid-cols-2 gap-4">
                                        <div class="flex gap-4 p-5 bg-white rounded-2xl border border-slate-100 shadow-sm hover:border-indigo-100 transition-colors">
                                            <div class="w-11 h-11 bg-indigo-50 rounded-xl flex items-center justify-center text-indigo-600 flex-shrink-0"><i data-lucide="file-text" size="22"></i></div>
                                            <div><h4 class="font-bold text-slate-800 mb-1">Fellow-Led Case Studies</h4><p class="text-slate-500 text-sm leading-snug">Brief, 'under the hood' looks at peers' AI workflows.</p></div>
                                        </div>
                                        <div class="flex gap-4 p-5 bg-white rounded-2xl border border-slate-100 shadow-sm hover:border-indigo-100 transition-colors">
                                            <div class="w-11 h-11 bg-indigo-50 rounded-xl flex items-center justify-center text-indigo-600 flex-shrink-0"><i data-lucide="users" size="22"></i></div>
                                            <div><h4 class="font-bold text-slate-800 mb-1">Interactive Roundtables</h4><p class="text-slate-500 text-sm leading-snug">Dives into scalable reading and bias assessment.</p></div>
                                        </div>
                                        <div class="flex gap-4 p-5 bg-white rounded-2xl border border-slate-100 shadow-sm hover:border-indigo-100 transition-colors">
                                            <div class="w-11 h-11 bg-indigo-50 rounded-xl flex items-center justify-center text-indigo-600 flex-shrink-0"><i data-lucide="map-pin" size="22"></i></div>
                                            <div><h4 class="font-bold text-slate-800 mb-1">Field Research</h4><p class="text-slate-500 text-sm leading-snug">Curated site visit to the Abbey Archives in St. Gallen.</p></div>
                                        </div>
                                        <div class="flex gap-4 p-5 bg-white rounded-2xl border border-slate-100 shadow-sm hover:border-indigo-100 transition-colors">
                                            <div class="w-11 h-11 bg-indigo-50 rounded-xl flex items-center justify-center text-indigo-600 flex-shrink-0"><i data-lucide="cpu" size="22"></i></div>
                                            <div><h4 class="font-bold text-slate-800 mb-1">Skill Acquisition</h4><p class="text-slate-500 text-sm leading-snug">Workshops on computational research frameworks.</p></div>
                                        </div>
                                    </div>
                                </section>

                                <section class="bg-slate-900 rounded-3xl p-10 text-white shadow-xl relative overflow-hidden">
                                    <div class="absolute top-0 right-0 w-32 h-32 bg-indigo-500 opacity-10 rounded-full -mr-16 -mt-16"></div>
                                    <h3 class="text-2xl font-bold mb-6 flex items-center gap-3">
                                        <i data-lucide="send" class="text-indigo-400" size="24"></i> Outcomes & Impact
                                    </h3>
                                    <ul class="space-y-4">
                                        <li class="flex gap-4">
                                            <div class="mt-1"><i data-lucide="check-circle" size="20" class="text-indigo-400"></i></div>
                                            <p class="text-slate-200"><span class="font-bold text-white">Professional Networking:</span> A joint symposium in Konstanz featuring invited experts.</p>
                                        </li>
                                        <li class="flex gap-4">
                                            <div class="mt-1"><i data-lucide="check-circle" size="20" class="text-indigo-400"></i></div>
                                            <p class="text-slate-200"><span class="font-bold text-white">Collaborative Online Publication:</span> A shared repository of AI workflows, prompts, and templates.</p>
                                        </li>
                                    </ul>
                                </section>
                            </div>

                            <div class="lg:col-span-1">
                                <div class="sticky top-10 bg-white rounded-3xl shadow-xl border border-slate-200 p-8">
                                    <h2 class="text-2xl font-bold text-slate-900 mb-6">RSVP</h2>
                                    <form onsubmit="handleRSVP(event)" class="space-y-5">
                                        <div><label class="block text-sm font-bold text-slate-700 mb-1.5">Full Name</label><input name="name" required class="w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl outline-none focus:ring-2 focus:ring-indigo-500 focus:bg-white transition-all" placeholder="Dr. Alex Scholar"></div>
                                        <div><label class="block text-sm font-bold text-slate-700 mb-1.5">Email Address</label><input type="email" name="email" required class="w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl outline-none focus:ring-2 focus:ring-indigo-500 focus:bg-white transition-all" placeholder="email@institution.edu"></div>
                                        <div><label class="block text-sm font-bold text-slate-700 mb-1.5">Institutional Affiliation</label><select name="affiliation" required class="w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl outline-none">
                                            <option value="" disabled selected>Select Affiliation</option>
                                            <option value="Zukunftskolleg Konstanz">Zukunftskolleg Konstanz</option>
                                            <option value="Martin Buber Society of Fellows">Martin Buber Society of Fellows</option>
                                            <option value="Other">Other (Guest)</option>
                                        </select></div>
                                        <div><label class="block text-sm font-bold text-slate-700 mb-1.5">Research Field</label><input name="researchField" required class="w-full px-4 py-2.5 bg-slate-50 border border-slate-200 rounded-xl focus:ring-2 focus:ring-indigo-500 outline-none transition-all" placeholder="e.g. Digital Humanities"></div>
                                        <div class="pt-2">
                                            <label class="flex items-start gap-3 cursor-pointer group bg-slate-50 p-3 rounded-xl border border-transparent hover:border-indigo-100 transition-all">
                                                <input type="checkbox" name="wantsCaseStudy" class="mt-1 w-4 h-4 rounded border-slate-300 text-indigo-600 focus:ring-indigo-500">
                                                <span class="text-sm text-slate-600 leading-tight">I am interested in contributing a brief case study from my research context.</span>
                                            </label>
                                        </div>
                                        <div class="mt-4 p-4 bg-indigo-50 rounded-2xl border border-indigo-100 flex gap-3 items-start shadow-sm">
                                            <i data-lucide="info" class="text-indigo-600 flex-shrink-0 mt-0.5" size="18"></i>
                                            <p class="text-[13px] leading-relaxed text-indigo-900 font-medium">
                                                This workshop is a shared learning environment. <span class="font-bold underline">No prior technical AI expertise or programming knowledge is required</span> to participate or benefit.
                                            </p>
                                        </div>
                                        <button type="submit" ${state.loading ? 'disabled' : ''} class="w-full bg-indigo-600 text-white font-bold py-4 rounded-xl hover:bg-indigo-700 shadow-lg shadow-indigo-100 active:scale-[0.98] disabled:bg-indigo-400 mt-2">${state.loading ? 'Processing...' : 'Register for Workshop'}</button>
                                    </form>
                                </div>
                            </div>
                        </div>
                    </main>

                    <footer class="bg-white border-t border-slate-200 py-16 px-6">
                        <div class="max-w-5xl mx-auto flex flex-col md:flex-row justify-between items-center gap-10">
                            <div class="text-center md:text-left">
                                <h3 class="text-slate-900 font-bold text-xl mb-2 tracking-tight">Shared Learning Environment</h3>
                                <p class="text-slate-500 max-w-sm text-sm">Fostering cross-disciplinary collaboration and skill acquisition in the age of AI.</p>
                                <button onclick="setView('admin-login')" class="mt-6 text-[10px] font-bold uppercase tracking-widest text-slate-300 hover:text-indigo-600 transition-colors flex items-center gap-1 mx-auto md:mx-0"><i data-lucide="lock" size="12"></i> Organizer Login</button>
                            </div>
                            <div class="flex gap-10 items-center opacity-60 grayscale hover:grayscale-0 hover:opacity-100 transition-all">
                                <img src="https://www.uni-konstanz.de/typo3conf/ext/in2template/Resources/Public/Images/logo.svg" class="h-8 w-auto" alt="Konstanz" onerror="${logoErrorHandler}">
                                <img src="https://buberfellows.huji.ac.il/sites/default/files/buberfellows/files/mbs_logo_new_0.png" class="h-10 w-auto" alt="Buber" onerror="${logoErrorHandler}">
                                <img src="https://buberfellows.huji.ac.il/profiles/openscholar/themes/huji_researcher/images/HUJI_LogoEng.jpg" class="h-8 w-auto" alt="HUJI" onerror="${logoErrorHandler}">
                            </div>
                        </div>
                    </footer>
                `;
            }
            lucide.createIcons();
        }

        initAuth();
    </script>
</body>
</html>
